// Zee's Probes Before Crew StationPartsExpansionRedux Patch
// Version 2.7

/////////// Station Parts Expansion Redux




//// ***************** Science Providers


// Cupola ***

@PART[sspx-cupola-125-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree]
{
	@TechRequired = commandModules
	@MODULE[ModuleScienceExperiment]:HAS[#experimentID[sspxVisualObservation]]
	{
		@usageReqMaskInternal = 4
		@usageReqMaskExternal = -1
		@xmitDataScalar = 1.0
	}
}

@PART[sspx-cupola-375-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree]
{
	@TechRequired = specializedCommandCenters
	@MODULE[ModuleScienceExperiment]:HAS[#experimentID[sspxVisualObservation]]
	{
		@usageReqMaskInternal = 4
		@usageReqMaskExternal = -1
		@xmitDataScalar = 1.0
	}
}

// Greenhouse ***

@PART[sspx-greenhouse-25-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree]
{
	@TechRequired = shortTermHabitation
	@MODULE[ModuleScienceExperiment]:HAS[#experimentID[sspxPlantGrowth]]
	{
		@usageReqMaskInternal = 12
		@usageReqMaskExternal = 8
		@xmitDataScalar = 1.0
		@interactionRange = 2.25
	}
}

@PART[sspx-greenhouse-375-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree]
{
	@TechRequired = advLogistics
	@MODULE[ModuleScienceExperiment]:HAS[#experimentID[sspxPlantGrowth]]
	{
		@usageReqMaskInternal = 12
		@usageReqMaskExternal = 8
		@xmitDataScalar = 1.0
		@interactionRange = 2.25
	}
}

// Aquaculture ***

@PART[sspx-aquaculture-375-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree]
{
	@TechRequired = advLogistics
	@MODULE[ModuleScienceExperiment]:HAS[#experimentID[sspxFishStudy]]
	{
		@usageReqMaskInternal = 12
		@usageReqMaskExternal = 8
		@xmitDataScalar = 1.0
		@interactionRange = 2.25
	}
}




//// ***************** 1.25m parts

// Rigid ***

@PART[sspx-core-125-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PTD-8R 'Pier' Station Core
{
	@TechRequired = commandModules
}

@PART[sspx-adapter-0625-125-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PTD-C Flat Adapter
{
	@TechRequired = advConstruction
}

@PART[sspx-airlock-125-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //SCATTER-1 Airlock
{
	@TechRequired = advConstruction
}

@PART[sspx-attach-125-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //Pressurized BZ-15 Radial Attachment Point
{
	@TechRequired = advConstruction
}

@PART[sspx-cargo-125-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PTD-C Storage Module
{
	@TechRequired = advConstruction
}

@PART[sspx-docking-125-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //Telescopic Clamp-O-Tron
{
	@TechRequired = actuators
}

@PART[sspx-habitation-125-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PTD-5 'Sunrise' Habitation Module
{
	@TechRequired = advConstruction
}

@PART[sspx-hub-125-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PTD-MULT Multi-Point Station Connector
{
	@TechRequired = advConstruction
}

@PART[sspx-tube-125-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PTD-1 Pressurized Crew Tube
{
	@TechRequired = advConstruction
}

@PART[sspx-tube-125-2]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PTD-2 Pressurized Crew Tube
{
	@TechRequired = advConstruction
}

@PART[sspx-tube-125-3]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PTD-3 Pressurized Crew Tube
{
	@TechRequired = advConstruction
}

@PART[sspx-utility-125-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PTD-6 'Star' Utility Module
{
	@TechRequired = advConstruction
}

// Inflatable/Extendable ***

@PART[sspx-extendable-tube-125-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //B-EX-1 Extensible Crew Tube
{
	@TechRequired = actuators
}

@PART[sspx-adjusting-base-125-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //BZ-1 Adjustable Base Frame
{
	@TechRequired = advLanding
}

@PART[sspx-adjusting-base-cradle-125-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //BR-1 Adjustable Base Cradle
{
	@TechRequired = hydroponics
	@entryCost = 55000
	@cost = 13500
}

@PART[sspx-inflatable-centrifuge-125-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //CTD-10 'Bagel' Inflatable Centrifuge
{
	@TechRequired = hydroponics
}

@PART[sspx-inflatable-centrifuge-125-2]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //CTD-5 'Doughnut' Compact Inflatable Centrifuge
{
	@TechRequired = hydroponics
}

@PART[sspx-inflatable-hab-125-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PTD-E-2 'Eclair' Inflatable
{
	@TechRequired = specializedConstruction
}

@PART[sspx-inflatable-hab-125-2]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PTD-E-1A 'Volleyball' Inflatable
{
	@TechRequired = specializedConstruction
}

@PART[sspx-inflatable-hab-125-3]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PTD-E-1B 'Winston' Inflatable
{
	@TechRequired = advConstruction
}

// Storage ***

@PART[sspx-cargo-container-radial-small-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //KRDA-O800 Cargo Container
{
	@TechRequired = storageTech
}

@PART[sspx-cargo-container-radial-small-2]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //KRDA-O400 Cargo Container
{
	@TechRequired = storageTech
}

@PART[sspx-cargo-container-radial-small-3]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //KRDA-O200 Cargo Container
{
	@TechRequired = storageTech
}




//// ***************** 2.5m parts

// Rigid ***

@PART[sspx-core-25-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PPD-8 'Wharf' Station Core
{
	@TechRequired = specializedCommandModules
}

@PART[sspx-adapter-125-25-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PPD-PTD Flat Adapter
{
	@TechRequired = composites
}

@PART[sspx-adapter-125-25-2]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PPD-PTD Adapter
{
	@TechRequired = composites
}

@PART[sspx-airlock-25-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PPD-EVAC-U-8 Service Airlock
{
	@TechRequired = composites
}

@PART[sspx-attach-25-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PPD-AR Pressurized Radial Attachment Module
{
	@TechRequired = composites
}

@PART[sspx-cargo-25-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PPD-TRUSS Storage Module
{
	@TechRequired = composites
}

@PART[sspx-cargo-25-2]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PPD-TRUSS-S Storage Module
{
	@TechRequired = composites
}

@PART[sspx-habitation-25-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PPD-20 'Shanty' Habitation Module
{
	@TechRequired = composites
}

@PART[sspx-hub-25-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PPD-MULT Multi-Point Station Connector
{
	@TechRequired = composites
}

@PART[sspx-observation-25-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PPD-24 'Panorama' Observation Module
{
	@TechRequired = specializedCommandModules
}

@PART[sspx-tube-25-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PPD-A1 Pressurized Crew Tube
{
	@TechRequired = composites
}

@PART[sspx-tube-25-2]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PPD-A2 Pressurized Crew Tube
{
	@TechRequired = composites
}

@PART[sspx-tube-25-3]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PPD-A3 Pressurized Crew Tube
{
	@TechRequired = composites
}

// Inflatable/Extendable ***

@PART[sspx-extendable-tube-25-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //B-EX-2 Extensible Crew Tube
{
	@TechRequired = experimentalActuators
}

@PART[sspx-adjusting-base-25-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //BZ-2 Adjustable Base Frame
{
	@TechRequired = heavyLanding
}

@PART[sspx-adjusting-base-cradle-25-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //BR-2 Adjustable Base Cradle
{
	@TechRequired = shortTermHabitation
	@entryCost = 78500
	@cost = 16200
}

@PART[sspx-inflatable-centrifuge-25-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PFD-C 'Coriolis' Inflatable Centrifuge
{
	@TechRequired = shortTermHabitation
}

@PART[sspx-inflatable-hab-25-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PFD-A 'Dirigible' Inflatable Habitation
{
	@TechRequired = composites
	@entryCost = 57500
}

@PART[sspx-inflatable-hab-25-2]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PFD-B 'Blimp' Inflatable Habitation
{
	@TechRequired = composites
}

// Storage ***

@PART[sspx-cargo-container-radial-medium-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //KRDA-T1600 Cargo Container
{
	@TechRequired = logistics
}

@PART[sspx-cargo-container-radial-medium-2]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //KRDA-T800 Cargo Container
{
	@TechRequired = logistics
}

@PART[sspx-cargo-container-radial-medium-3]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //KRDA-T400 Cargo Container
{
	@TechRequired = logistics
}

@PART[sspx-cargo-container-25-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PPD-CRG-1 Logistics Module
{
	@TechRequired = logistics
}

@PART[sspx-cargo-container-25-2]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PPD-CRG-1 Logistics Module
{
	@TechRequired = logistics
}

@PART[sspx-cargo-container-25-3]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PPD-CRG-1 Logistics Module
{
	@TechRequired = logistics
}



//// ***************** 3.7m parts

// Rigid ***

@PART[sspx-core-375-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PXL-10 'Harbour' Station Control Centre
{
	@TechRequired = specializedCommandCenters
}

@PART[sspx-adapter-25-375-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PXL-2A Conical Adapter
{
	@TechRequired = orbitalAssembly
}

@PART[sspx-adapter-25-375-2]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PXL-PPD Flat Adapter
{
	@TechRequired = orbitalAssembly
}

@PART[sspx-attach-375-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PXL-AR Pressurized Radial Attachment
{
	@TechRequired = orbitalAssembly
}

@PART[sspx-habitation-375-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PXL-1 'Hostel' Deep-Space Habitation
{
	@TechRequired = orbitalAssembly
}

@PART[sspx-habitation-375-2]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PXL-2 'Shelter' Deep-Space Habitation Module
{
	@TechRequired = orbitalAssembly
}

@PART[sspx-habitation-375-3]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PXL-3 'Asylum' Storm Cellar Module
{
	@TechRequired = orbitalAssembly
}

@PART[sspx-lab-375-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PXL-2 'Fate' Deep-Space Laboratory Module
{
	@TechRequired = specializedCommandCenters
}

@PART[sspx-tube-375-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PXL-T1 Pressurized Crew Tube
{
	@TechRequired = orbitalAssembly
}

@PART[sspx-tube-375-2]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PXL-T2 Pressurized Crew Tube
{
	@TechRequired = orbitalAssembly
}

@PART[sspx-tube-375-3]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PXL-T3 Pressurized Crew Tube
{
	@TechRequired = orbitalAssembly
}

// Inflatable/Extendable ***

@PART[sspx-adjusting-base-375-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //BZ-3 Adjustable Base Frame
{
	@TechRequired = advancedMotors
}

@PART[sspx-adjusting-base-cradle-375-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //BR-3 Adjustable Base Cradle
{
	@TechRequired = advLogistics
	@entryCost = 103500
	@cost = 21500
}

@PART[sspx-expandable-centrifuge-375-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PXL-E 'Mercury' Extensible Centrifuge
{
	@TechRequired = advLogistics
}

@PART[sspx-expandable-centrifuge-375-2]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PXL-F 'Pilgrim' Extensible Centrifuge
{
	@TechRequired = advLogistics
}

// Storage ***

@PART[sspx-cargo-container-375-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PXL-CRG-1 Logistics Module
{
	@TechRequired = longTermHabitation
}

@PART[sspx-cargo-container-375-2]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PXL-CRG-2 Logistics Module
{
	@TechRequired = longTermHabitation
}

@PART[sspx-cargo-container-375-3]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //PXL-CRG-3 Logistics Module
{
	@TechRequired = longTermHabitation
}

@PART[sspx-cargo-container-radial-huge-1]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //KRDA-XL8000 Cargo Container
{
	@TechRequired = advLogistics
}

@PART[sspx-cargo-container-radial-huge-2]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree] //KRDA-XL4000 Cargo Container
{
	@TechRequired = advLogistics
}





//// ***************** Experiment Definitions 


// This adds SPER visual scan experiment to stock, missing SPER 2.5m cupola, small and large USI-LS cupolas.

@PART[cupola|sspx-observation-25-1|USILS_SmCupola|USILS_ViewingCupola]:NEEDS[CommunityTechTree,StationPartsExpansionRedux]
{
	!MODULE[ModuleScienceExperiment]:HAS[#experimentID[crewReport]] {}
	%MODULE[ModuleScienceExperiment]
	{
		name = ModuleScienceExperiment
		experimentID = sspxVisualObservation
		experimentActionName = #LOC_SSPX_Science_VisualScan_Action_Name
		resetActionName = #LOC_SSPX_Science_VisualScan_Action_Reset
		reviewActionName = #LOC_SSPX_Science_VisualScan_Action_Review
		useStaging = False
		useActionGroups = True
		hideUIwhenUnavailable = True
		rerunnable = True
		usageReqMaskInternal = 4
		usageReqMaskExternal = -1
		xmitDataScalar = 1.0
	}
}

@EXPERIMENT_DEFINITION:HAS[#id[sspxFishStudy]]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree]
{
	@baseValue = 25
	@scienceCap = 25
	@situationMask = 49
	@biomeMask = 0
}

@EXPERIMENT_DEFINITION:HAS[#id[sspxPlantGrowth]]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree]
{
	@baseValue = 20
	@scienceCap = 20
	@situationMask = 49
	@biomeMask = 0
}

@EXPERIMENT_DEFINITION:HAS[#id[sspxVisualObservation]]:AFTER[StationPartsExpansionRedux]:NEEDS[CommunityTechTree]
{
	@baseValue = 8
	@scienceCap = 8
	@situationMask = 49
	@biomeMask = 0
}






